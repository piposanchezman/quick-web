---
interface Props {
    translations: any;
}

const { translations: t } = Astro.props;
---

<section
  id="inicio"
  class="relative min-h-screen flex flex-col items-center justify-center text-center px-4 overflow-hidden pt-20"
>
  <!-- Hero Content -->
  <div
    class="relative z-10 flex flex-col items-center max-w-4xl mx-auto space-y-8"
  >
    <!-- Logo with Glow -->
    <div class="relative group">
      <div
        class="absolute inset-0 bg-[#55ffff] rounded-full blur-xl opacity-20 group-hover:opacity-40 transition-opacity duration-500 animate-pulse-slow"
      >
      </div>
      <img
        src="/logo.webp"
        alt="Logo Quickland"
        class="relative w-32 h-32 sm:w-48 sm:h-48 rounded-full border-4 border-[#55ffff]/50 shadow-[0_0_30px_rgba(85,255,255,0.3)] group-hover:scale-105 transition-transform duration-500"
        loading="eager"
        decoding="async"
        width="192"
        height="192"
      />
    </div>

    <!-- Main Title -->
    <div class="space-y-4">
      <h1
        class="text-6xl sm:text-7xl md:text-8xl font-black bg-gradient-to-br from-[#55ffff] via-white to-[#33cccc] bg-clip-text text-transparent drop-shadow-[0_0_15px_rgba(85,255,255,0.5)] animate-fade-in-up"
      >
        {t['header.title']}
      </h1>
      <p
        class="text-xl sm:text-2xl text-gray-300 max-w-2xl mx-auto font-light leading-relaxed animate-fade-in-up delay-100"
      >
        {t['header.subtitle']}
      </p>
    </div>

    <!-- Server Status Chip -->
    <div
      id="server-status"
      class="animate-fade-in-up delay-200 inline-flex items-center space-x-3 bg-white/5 backdrop-blur-md px-6 py-3 rounded-full border border-white/10 hover:border-[#55ffff]/50 transition-all duration-300 cursor-default"
    >
      <div class="relative">
        <div
          id="status-indicator-ping"
          class="absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"
        >
        </div>
        <div
          id="status-indicator"
          class="relative w-3 h-3 bg-green-500 rounded-full"
        >
        </div>
      </div>
      <div class="flex flex-col text-left">
        <span
          id="status-text"
          class="text-white font-bold tracking-wide text-sm leading-none"
          data-offline-text={t['header.offline']}
          >{t['header.online']}</span
        >
        <span
          id="player-count-wrapper"
          class="text-xs text-[#55ffff] font-medium mt-1"
        >
          <span id="player-count">0</span>
          <span>{t['header.players']}</span>
        </span>
      </div>
    </div>

    <!-- IP Copy Buttons -->
    <div
      class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-lg mt-8 animate-fade-in-up delay-300"
    >
      <!-- Java -->
      <button
        id="copy-java"
        class="group relative overflow-hidden px-8 py-4 bg-[#55ffff]/10 backdrop-blur-md rounded-xl border border-[#55ffff]/30 hover:bg-[#55ffff]/20 hover:border-[#55ffff] transition-all duration-300 text-left"
        data-copied-text={t['header.copied']}
      >
        <div class="flex items-center justify-between">
          <div class="flex flex-col">
            <span
              class="text-xs text-[#55ffff] font-bold uppercase tracking-wider"
              >{t['header.javaEdition']}</span
            >
            <span
              class="text-lg text-white font-bold group-hover:text-[#55ffff] transition-colors"
              >quickland.net</span
            >
          </div>
          <!-- Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 text-[#55ffff] transform group-hover:scale-110 transition-transform"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
            ></path>
          </svg>
        </div>
        <!-- Click Feedback -->
        <div
          class="absolute inset-0 bg-[#55ffff]/20 transform scale-x-0 group-active:scale-x-100 transition-transform origin-left duration-150"
        >
        </div>
      </button>

      <!-- Bedrock -->
      <button
        id="copy-bedrock"
        class="group relative overflow-hidden px-8 py-4 bg-[#33cccc]/10 backdrop-blur-md rounded-xl border border-[#33cccc]/30 hover:bg-[#33cccc]/20 hover:border-[#33cccc] transition-all duration-300 text-left"
        data-copied-text={t['header.copied']}
      >
        <div class="flex items-center justify-between">
          <div class="flex flex-col">
            <span
              class="text-xs text-[#33cccc] font-bold uppercase tracking-wider"
              >{t['header.bedrockEdition']}</span
            >
            <span
              class="text-lg text-white font-bold group-hover:text-[#33cccc] transition-colors"
              >quickland.net</span
            >
            <span class="text-[10px] text-gray-400 font-mono tracking-wide"
              >{t['header.port']}: 19132</span
            >
          </div>
          <!-- Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 text-[#33cccc] transform group-hover:scale-110 transition-transform"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"
            ></path>
          </svg>
        </div>
        <div
          class="absolute inset-0 bg-[#33cccc]/20 transform scale-x-0 group-active:scale-x-100 transition-transform origin-left duration-150"
        >
        </div>
      </button>
    </div>
  </div>

  <!-- Scroll Down Indicator -->
  <a
    id="scroll-indicator"
    href="#caracteristicas"
    class="mt-12 animate-bounce delay-500 opacity-75 hover:opacity-100 transition-all duration-300 cursor-pointer z-20 p-2"
    aria-label="Bajar"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-10 w-10 text-[#55ffff] drop-shadow-[0_0_10px_rgba(85,255,255,0.5)]"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 13l-7 7-7-7m14-8l-7 7-7-7"></path>
    </svg>
  </a>
</section>

<style>
  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
    transform: translateY(20px);
  }

  .delay-100 {
    animation-delay: 0.1s;
  }
  .delay-200 {
    animation-delay: 0.2s;
  }
  .delay-300 {
    animation-delay: 0.3s;
  }
  .delay-500 {
    animation-delay: 0.5s;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse-slow {
    0%,
    100% {
      opacity: 0.2;
      transform: scale(1);
    }
    50% {
      opacity: 0.3;
      transform: scale(1.05);
    }
  }
</style>

<script>
  // Store translations on page load
  let onlineText = "Servidor Online";
  let offlineText = "Servidor Offline";

  // Server Status Logic
  async function updateServerStatus() {
    const indicator = document.getElementById("status-indicator");
    const indicatorPing = document.getElementById("status-indicator-ping");
    const text = document.getElementById("status-text");
    const count = document.getElementById("player-count");

    try {
      const res = await fetch("https://api.mcsrvstat.us/3/quickland.net");
      const data = await res.json();

      if (data.online) {
        indicator?.classList.remove("bg-red-500");
        indicator?.classList.add("bg-green-500");

        indicatorPing?.classList.remove("hidden");

        if (text) text.textContent = onlineText;

        if (count) count.textContent = data.players?.online?.toString() || "0";
      } else {
        indicator?.classList.remove("bg-green-500");
        indicator?.classList.add("bg-red-500");
        indicatorPing?.classList.add("hidden");

        if (text) text.textContent = offlineText;
      }
    } catch (e) {
      console.error("Failed to fetch status", e);
    }
  }

  // IP Copy Logic
  function setupCopy(id: string, textToCopy: string) {
    const btn = document.getElementById(id);

    btn?.addEventListener("click", () => {
      navigator.clipboard.writeText(textToCopy).then(() => {
        const copiedText = btn.dataset.copiedText || "Â¡Copiado!";

        if (window.showToast) {
          window.showToast(copiedText);
        }
      });
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    // Initialize translation texts from server-rendered content
    const statusText = document.getElementById("status-text");
    if (statusText) {
      onlineText = statusText.textContent || "Servidor Online";
      offlineText = statusText.dataset.offlineText || "Servidor Offline";
    }

    updateServerStatus();
    setInterval(updateServerStatus, 60000);

    setupCopy("copy-java", "quickland.net");
    setupCopy("copy-bedrock", "quickland.net");

    // Scroll Indicator Logic
    const scrollIndicator = document.getElementById("scroll-indicator");
    if (scrollIndicator) {
      window.addEventListener("scroll", () => {
        if (window.scrollY > 50) {
          scrollIndicator.classList.add("opacity-0", "pointer-events-none");
          scrollIndicator.classList.remove("delay-500", "animate-bounce"); // Stop animation to save resources and clean visuals
        } else {
          scrollIndicator.classList.remove("opacity-0", "pointer-events-none");
          scrollIndicator.classList.add("animate-bounce");
        }
      });
    }
  });
</script>
